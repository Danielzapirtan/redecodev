<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Designer de Camere AI - Generator de Prompturi JSON</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #10a37f;
            --primary-dark: #0d8c6d;
            --secondary: #5438dc;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: var(--primary);
        }
        
        h1 {
            color: var(--primary);
            font-size: 2.2rem;
        }
        
        .subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .app-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 992px) {
            .app-container {
                grid-template-columns: 1fr;
            }
        }
        
        .design-panel, .prompt-panel {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .panel-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-gray);
        }
        
        .panel-title i {
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        h2 {
            color: var(--dark);
            font-size: 1.5rem;
        }
        
        .design-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }
        
        @media (max-width: 768px) {
            .design-controls {
                grid-template-columns: 1fr;
            }
        }
        
        .control-group {
            margin-bottom: 10px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        select, input[type="color"], input[type="range"], input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
            background: white;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .color-picker-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid var(--light-gray);
        }
        
        .range-value {
            display: inline-block;
            margin-left: 10px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .dimensions-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 10px;
        }
        
        .furniture-selection {
            margin-top: 20px;
        }
        
        .furniture-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        @media (max-width: 576px) {
            .furniture-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .dimensions-container {
                grid-template-columns: 1fr;
            }
        }
        
        .furniture-item {
            padding: 12px;
            background: var(--light-gray);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }
        
        .furniture-item:hover {
            background: #dae0e5;
        }
        
        .furniture-item.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary-dark);
        }
        
        .furniture-item i {
            display: block;
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .room-preview {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 25px;
            text-align: center;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 2px dashed #c3cfe2;
        }
        
        .room-icon {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .room-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
            width: 100%;
        }
        
        .detail-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .prompt-display {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            white-space: pre;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #333;
        }
        
        .json-key {
            color: #9cdcfe;
        }
        
        .json-string {
            color: #ce9178;
        }
        
        .json-number {
            color: #b5cea8;
        }
        
        .json-boolean {
            color: #569cd6;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex: 1;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(16, 163, 127, 0.3);
        }
        
        .btn-secondary {
            background: var(--light-gray);
            color: var(--dark);
        }
        
        .btn-secondary:hover {
            background: #dae0e5;
        }
        
        .instructions {
            background: #e8f4f1;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid var(--primary);
        }
        
        .instructions h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }
        
        .instructions ol {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 12px;
            line-height: 1.5;
        }
        
        .history-panel {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-top: 30px;
        }
        
        .history-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .history-item {
            background: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }
        
        .history-item:hover {
            background: #dae0e5;
            border-color: var(--primary);
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--gray);
            font-size: 0.9rem;
            border-top: 1px solid var(--light-gray);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.5s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            background: var(--secondary);
            color: white;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 5px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--light-gray);
        }
        
        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            border-bottom: 3px solid transparent;
            transition: var(--transition);
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .furniture-controls {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--light-gray);
        }
        
        .furniture-list {
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .furniture-config-item {
            background: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .furniture-config-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .remove-furniture {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-couch"></i>
                <h1>Designer de Camere AI - JSON Generator</h1>
            </div>
            <p class="subtitle">
                Creează configurații JSON pentru prezentare camere! Personalizează toate detaliile, generează promptul JSON optimizat 
                pentru prezentări și vizualizări 3D.
            </p>
        </header>
        
        <main>
            <div class="app-container">
                <!-- Panou Design Cameră -->
                <section class="design-panel">
                    <div class="panel-title">
                        <i class="fas fa-paint-roller"></i>
                        <h2>Configurează Camera</h2>
                    </div>
                    
                    <div class="tabs">
                        <button class="tab active" data-tab="basic">Configurare Basic</button>
                        <button class="tab" data-tab="dimensions">Dimensiuni</button>
                        <button class="tab" data-tab="furniture">Mobilier</button>
                    </div>
                    
                    <div class="tab-content active" id="basic-tab">
                        <div class="design-controls">
                            <div class="control-group">
                                <label for="roomType"><i class="fas fa-door-open"></i> Tip Cameră</label>
                                <select id="roomType">
                                    <option value="living">Living</option>
                                    <option value="bedroom" selected>Dormitor</option>
                                    <option value="kitchen">Bucătărie</option>
                                    <option value="bathroom">Baie</option>
                                    <option value="office">Birou</option>
                                    <option value="dining">Sufragerie</option>
                                </select>
                            </div>
                            
                            <div class="control-group">
                                <label for="style"><i class="fas fa-palette"></i> Stil Interior</label>
                                <select id="style">
                                    <option value="modern">Modern</option>
                                    <option value="classical" selected>Clasic</option>
                                    <option value="scandinavian">Scandinavian</option>
                                    <option value="industrial">Industrial</option>
                                    <option value="bohemian">Bohemian</option>
                                    <option value="traditional">Traditional</option>
                                    <option value="minimalist">Minimalist</option>
                                </select>
                            </div>
                            
                            <div class="control-group">
                                <label for="roomId"><i class="fas fa-hashtag"></i> ID Cameră</label>
                                <input type="text" id="roomId" value="bedroom_004">
                            </div>
                            
                            <div class="control-group">
                                <label for="roomName"><i class="fas fa-signature"></i> Nume Cameră</label>
                                <input type="text" id="roomName" value="Bedroom">
                            </div>
                            
                            <div class="control-group">
                                <label for="lighting"><i class="fas fa-lightbulb"></i> Iluminat</label>
                                <select id="lighting">
                                    <option value="natural" selected>Natural</option>
                                    <option value="warm">Călduros</option>
                                    <option value="bright">Luminos</option>
                                    <option value="moody">Atmosferic</option>
                                </select>
                            </div>
                            
                            <div class="control-group">
                                <label for="description"><i class="fas fa-align-left"></i> Descriere</label>
                                <textarea id="description" rows="3" style="width:100%; padding:12px 15px; border:2px solid var(--light-gray); border-radius:8px;">Classical-style bedroom layout with furniture placement</textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="dimensions-tab">
                        <div class="control-group">
                            <label><i class="fas fa-expand-arrows-alt"></i> Dimensiuni Cameră (metri)</label>
                            <div class="dimensions-container">
                                <div>
                                    <label for="roomLength">Lungime</label>
                                    <input type="number" id="roomLength" min="1" max="20" step="0.1" value="3.2">
                                </div>
                                <div>
                                    <label for="roomWidth">Lățime</label>
                                    <input type="number" id="roomWidth" min="1" max="20" step="0.1" value="3.1">
                                </div>
                                <div>
                                    <label for="roomHeight">Înălțime</label>
                                    <input type="number" id="roomHeight" min="1" max="10" step="0.1" value="2.2">
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label for="roomShape"><i class="fas fa-vector-square"></i> Formă Cameră</label>
                            <select id="roomShape">
                                <option value="rectangular" selected>Dreptunghiulară</option>
                                <option value="square">Pătrată</option>
                                <option value="L-shaped">Forma L</option>
                                <option value="open-plan">Open Plan</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="furniture-tab">
                        <div class="furniture-controls">
                            <div class="control-group">
                                <label><i class="fas fa-plus-circle"></i> Adaugă Mobilier</label>
                                <div style="display:flex; gap:10px;">
                                    <select id="newFurnitureType" style="flex:1;">
                                        <option value="Door">Ușă</option>
                                        <option value="Window">Fereastră</option>
                                        <option value="Bed">Pat</option>
                                        <option value="Desk">Birou</option>
                                        <option value="Chair">Scaun</option>
                                        <option value="Wardrobe">Dulap</option>
                                        <option value="Bookcase">Bibliotecă</option>
                                        <option value="Nightstand">Noptieră</option>
                                        <option value="Plants">Plante</option>
                                        <option value="Sofa">Canapea</option>
                                        <option value="Table">Masă</option>
                                    </select>
                                    <button class="btn btn-primary" id="addFurnitureBtn" style="flex:0 0 auto;">
                                        <i class="fas fa-plus"></i> Adaugă
                                    </button>
                                </div>
                            </div>
                            
                            <div class="furniture-list" id="furnitureList">
                                <!-- Furniture items will be added by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="room-preview">
                        <i class="fas fa-home room-icon" id="roomIcon"></i>
                        <h3 id="roomTitle">Dormitor Clasic</h3>
                        <div class="room-details" id="roomDetails">
                            <!-- Details will be populated by JavaScript -->
                        </div>
                    </div>
                </section>
                
                <!-- Panou Prompt și Instrucțiuni -->
                <section class="prompt-panel">
                    <div class="panel-title">
                        <i class="fas fa-code"></i>
                        <h2>JSON Configurație Generat</h2>
                    </div>
                    
                    <div class="prompt-display" id="promptDisplay">
                        {
  "project_information": {
    "schema": "IFC-aligned spatial configuration",
    "version": "1.0",
    "unit": "meters"
  },
  "space": {
    "id": "bedroom_004",
    "name": "Bedroom",
    "description": "Classical-style bedroom layout with furniture placement",
    "shape": "rectangular",
    "dimensions": {
      "length": 3.2,
      "width": 3.1,
      "height": 2.2
    },
    "style": "classical",
    "furniture_placement_requirements": [
      "All objects must be positioned exactly according to provided coordinates",
      "All objects must maintain exact specified dimensions",
      "Rotation values must be applied precisely where specified",
      "Object positions are relative to room origin (0,0) at bottom-left corner"
    ],
    "furniture": [
      {
        "type": "Door",
        "ifc_class": "IfcDoor",
        "position": {"x": 0.0, "y": 0.0},
        "dimensions": {"length": 0.0, "width": 0.4},
        "height": 2.1
      },
      {
        "type": "Bookcase",
        "ifc_class": "IfcFurniture",
        "position": {"x": 0.0, "y": 1.5},
        "dimensions": {"length": 0.2, "width": 1.6},
        "height": 2.0
      },
      {
        "type": "Wardrobe",
        "ifc_class": "IfcFurniture",
        "position": {"x": 0.2, "y": 2.7},
        "dimensions": {"length": 1.2, "width": 0.4},
        "height": 2.1
      }
    ],
    "metadata": {
      "lighting": "natural",
      "coordinate_system": "Cartesian (x,y) with origin at room corner",
      "scale": "1 unit = 1 meter"
    }
  },
  "visualization_instructions": {
    "task": "Generate a photorealistic 3D rendering of Bedroom_004",
    "requirements": [
      "Viewpoint showing overall room layout",
      "Maintain exact spatial positioning of all objects as specified",
      "Maintain precise dimensional accuracy of all objects",
      "Apply classical architectural style consistently",
      "Ensure natural lighting conditions as specified"
    ]
  }
}
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" id="copyBtn">
                            <i class="far fa-copy"></i> Copiază JSON
                        </button>
                        <button class="btn btn-secondary" id="generateBtn">
                            <i class="fas fa-sync-alt"></i> Regenerează
                        </button>
                    </div>
                    
                    <div class="instructions">
                        <h3><i class="fas fa-graduation-cap"></i> Cum folosești configurația JSON:</h3>
                        <ol>
                            <li><strong>Copiază configurația JSON</strong> (butonul "Copiază JSON")</li>
                            <li><strong>Folosește-l pentru prezentări</strong> în aplicații de vizualizare 3D</li>
                            <li><strong>Integrează în tool-uri</strong> de design interior sau arhitectură</li>
                            <li><strong>Partajează cu clienți</strong> pentru aprobare vizuală</li>
                            <li><strong>Exportă ca bază</strong> pentru proiecte BIM</li>
                        </ol>
                        <p style="margin-top: 10px; font-style: italic; color: var(--primary-dark);">
                            <i class="fas fa-lightbulb"></i> 
                            <strong>Sfat:</strong> Această configurație este optimizată pentru prezentări, nu pentru implementare tehnică detaliată.
                        </p>
                    </div>
                </section>
            </div>
            
            <!-- Istoric Configurații (opțional) -->
            <section class="history-panel" id="historyPanel">
                <div class="panel-title">
                    <i class="fas fa-history"></i>
                    <h2>Istoric Configurații <span class="badge">Beta</span></h2>
                </div>
                <p>Configurațiile tale recente (stocate local în browser):</p>
                <div class="history-list" id="historyList">
                    <!-- History items will be added by JavaScript -->
                </div>
            </section>
        </main>
        
        <footer>
            <p>Acest tool generează configurații JSON optimizate pentru prezentări de design interior.</p>
            <p>Formatul este compatibil cu sisteme de vizualizare 3D și tool-uri de prezentare.</p>
        </footer>
    </div>
    
    <!-- Notificare Copiere -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span>JSON copiat în clipboard!</span>
    </div>

    <script>
        // Date inițiale
        const furnitureTemplates = {
            'Door': { ifc_class: 'IfcDoor', dimensions: { length: 0.0, width: 0.4 }, height: 2.1, position: { x: 0.0, y: 0.0 } },
            'Window': { ifc_class: 'IfcWindow', dimensions: { length: 0.1, width: 1.7 }, height: 1.5, position: { x: 3.1, y: 0.7 } },
            'Bed': { ifc_class: 'IfcFurniture', dimensions: { length: 1.6, width: 0.6 }, height: 0.5, position: { x: 1.4, y: 2.5 } },
            'Desk': { ifc_class: 'IfcFurniture', dimensions: { length: 1.1, width: 0.3 }, height: 0.75, position: { x: 2.1, y: 0.0 } },
            'Chair': { ifc_class: 'IfcFurniture', dimensions: { length: 0.5, width: 0.4 }, height: 0.9, position: { x: 2.4, y: 0.3 } },
            'Wardrobe': { ifc_class: 'IfcFurniture', dimensions: { length: 1.2, width: 0.4 }, height: 2.1, position: { x: 0.2, y: 2.7 } },
            'Bookcase': { ifc_class: 'IfcFurniture', dimensions: { length: 0.2, width: 1.6 }, height: 2.0, position: { x: 0.0, y: 1.5 } },
            'Nightstand': { ifc_class: 'IfcFurniture', dimensions: { length: 0.6, width: 0.4 }, height: 0.7, position: { x: 1.2, y: 0.0 } },
            'Plants': { ifc_class: 'IfcFurniture', dimensions: { length: 0.1, width: 1.7 }, height: 1.0, position: { x: 3.0, y: 0.7 } },
            'Sofa': { ifc_class: 'IfcFurniture', dimensions: { length: 2.0, width: 0.8 }, height: 0.8, position: { x: 1.0, y: 1.0 } },
            'Table': { ifc_class: 'IfcFurniture', dimensions: { length: 1.2, width: 0.6 }, height: 0.75, position: { x: 1.5, y: 1.5 } }
        };
        
        const roomIcons = {
            'living': 'fas fa-couch',
            'bedroom': 'fas fa-bed',
            'kitchen': 'fas fa-utensils',
            'bathroom': 'fas fa-bath',
            'office': 'fas fa-briefcase',
            'dining': 'fas fa-utensils'
        };
        
        // Mobiliere inițiale
        let furnitureItems = [
            { type: 'Door', ifc_class: 'IfcDoor', position: { x: 0.0, y: 0.0 }, dimensions: { length: 0.0, width: 0.4 }, height: 2.1 },
            { type: 'Bookcase', ifc_class: 'IfcFurniture', position: { x: 0.0, y: 1.5 }, dimensions: { length: 0.2, width: 1.6 }, height: 2.0 },
            { type: 'Wardrobe', ifc_class: 'IfcFurniture', position: { x: 0.2, y: 2.7 }, dimensions: { length: 1.2, width: 0.4 }, height: 2.1 },
            { type: 'Bed', ifc_class: 'IfcFurniture', position: { x: 1.4, y: 2.5 }, dimensions: { length: 1.6, width: 0.6 }, height: 0.5 },
            { type: 'Window', ifc_class: 'IfcWindow', position: { x: 3.1, y: 0.7 }, dimensions: { length: 0.1, width: 1.7 }, height: 1.5 },
            { type: 'Plants', ifc_class: 'IfcFurniture', position: { x: 3.0, y: 0.7 }, dimensions: { length: 0.1, width: 1.7 }, height: 1.0 },
            { type: 'Desk', ifc_class: 'IfcFurniture', position: { x: 2.1, y: 0.0 }, dimensions: { length: 1.1, width: 0.3 }, height: 0.75 },
            { type: 'Chair', ifc_class: 'IfcFurniture', position: { x: 2.4, y: 0.3 }, dimensions: { length: 0.5, width: 0.4 }, height: 0.9 },
            { type: 'Nightstand', ifc_class: 'IfcFurniture', position: { x: 1.2, y: 0.0 }, dimensions: { length: 0.6, width: 0.4 }, height: 0.7 }
        ];
        
        // Starea aplicației
        let promptHistory = JSON.parse(localStorage.getItem('roomJSONHistory')) || [];
        
        // Inițializare la încărcarea paginii
        document.addEventListener('DOMContentLoaded', function() {
            initFurnitureList();
            initEventListeners();
            updateRoomPreview();
            generateJSON();
            updateHistoryPanel();
            
            // Setează tab-urile
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Remove active class from all tabs and contents
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to current tab and content
                    this.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
        });
        
        // Inițializează lista de mobilier
        function initFurnitureList() {
            updateFurnitureList();
        }
        
        // Actualizează lista de mobilier în UI
        function updateFurnitureList() {
            const list = document.getElementById('furnitureList');
            list.innerHTML = '';
            
            furnitureItems.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'furniture-config-item';
                div.innerHTML = `
                    <div class="furniture-config-header">
                        <strong>${item.type}</strong>
                        <button class="remove-furniture" data-index="${index}">
                            <i class="fas fa-times"></i> Elimină
                        </button>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px;">
                        <div>
                            <label>Poziție X</label>
                            <input type="number" class="furniture-pos-x" data-index="${index}" value="${item.position.x}" step="0.1" min="0">
                        </div>
                        <div>
                            <label>Poziție Y</label>
                            <input type="number" class="furniture-pos-y" data-index="${index}" value="${item.position.y}" step="0.1" min="0">
                        </div>
                        <div>
                            <label>Lungime</label>
                            <input type="number" class="furniture-length" data-index="${index}" value="${item.dimensions.length}" step="0.1" min="0">
                        </div>
                        <div>
                            <label>Lățime</label>
                            <input type="number" class="furniture-width" data-index="${index}" value="${item.dimensions.width}" step="0.1" min="0">
                        </div>
                        <div>
                            <label>Înălțime</label>
                            <input type="number" class="furniture-height" data-index="${index}" value="${item.height}" step="0.1" min="0">
                        </div>
                    </div>
                `;
                list.appendChild(div);
            });
            
            // Adaugă event listeners pentru input-urile de mobilier
            document.querySelectorAll('.remove-furniture').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    furnitureItems.splice(index, 1);
                    updateFurnitureList();
                    updateRoomPreview();
                    generateJSON();
                });
            });
            
            document.querySelectorAll('.furniture-pos-x, .furniture-pos-y, .furniture-length, .furniture-width, .furniture-height').forEach(input => {
                input.addEventListener('input', function() {
                    const index = parseInt(this.dataset.index);
                    const field = this.className.replace('furniture-', '');
                    
                    if (field === 'pos-x') {
                        furnitureItems[index].position.x = parseFloat(this.value);
                    } else if (field === 'pos-y') {
                        furnitureItems[index].position.y = parseFloat(this.value);
                    } else if (field === 'length') {
                        furnitureItems[index].dimensions.length = parseFloat(this.value);
                    } else if (field === 'width') {
                        furnitureItems[index].dimensions.width = parseFloat(this.value);
                    } else if (field === 'height') {
                        furnitureItems[index].height = parseFloat(this.value);
                    }
                    
                    updateRoomPreview();
                    generateJSON();
                });
            });
        }
        
        // Inițializează event listeners
        function initEventListeners() {
            // Controale design
            document.getElementById('roomType').addEventListener('change', updateRoomPreview);
            document.getElementById('style').addEventListener('change', updateRoomPreview);
            document.getElementById('roomId').addEventListener('input', updateRoomPreview);
            document.getElementById('roomName').addEventListener('input', updateRoomPreview);
            document.getElementById('lighting').addEventListener('change', updateRoomPreview);
            document.getElementById('description').addEventListener('input', updateRoomPreview);
            document.getElementById('roomLength').addEventListener('input', updateRoomPreview);
            document.getElementById('roomWidth').addEventListener('input', updateRoomPreview);
            document.getElementById('roomHeight').addEventListener('input', updateRoomPreview);
            document.getElementById('roomShape').addEventListener('change', updateRoomPreview);
            
            // Buton adăugare mobilier
            document.getElementById('addFurnitureBtn').addEventListener('click', addFurniture);
            
            // Butoane acțiuni
            document.getElementById('copyBtn').addEventListener('click', copyJSON);
            document.getElementById('generateBtn').addEventListener('click', generateJSON);
        }
        
        // Adaugă mobilier nou
        function addFurniture() {
            const type = document.getElementById('newFurnitureType').value;
            const template = furnitureTemplates[type];
            
            if (template) {
                // Generează o poziție unică
                const newPosition = {
                    x: parseFloat((Math.random() * 2).toFixed(1)),
                    y: parseFloat((Math.random() * 2).toFixed(1))
                };
                
                furnitureItems.push({
                    type: type,
                    ifc_class: template.ifc_class,
                    position: newPosition,
                    dimensions: { ...template.dimensions },
                    height: template.height
                });
                
                updateFurnitureList();
                updateRoomPreview();
                generateJSON();
            }
        }
        
        // Actualizează previzualizarea camerei
        function updateRoomPreview() {
            const roomType = document.getElementById('roomType').value;
            const style = document.getElementById('style').value;
            const roomId = document.getElementById('roomId').value;
            const roomName = document.getElementById('roomName').value;
            const length = document.getElementById('roomLength').value;
            const width = document.getElementById('roomWidth').value;
            const height = document.getElementById('roomHeight').value;
            const shape = document.getElementById('roomShape').value;
            
            // Actualizează iconița
            document.getElementById('roomIcon').className = `fas ${roomIcons[roomType]} room-icon`;
            
            // Actualizează titlul
            const roomNames = {
                'living': 'Living',
                'bedroom': 'Dormitor',
                'kitchen': 'Bucătărie',
                'bathroom': 'Baie',
                'office': 'Birou',
                'dining': 'Sufragerie'
            };
            
            const styleNames = {
                'modern': 'Modern',
                'classical': 'Clasic',
                'scandinavian': 'Scandinavian',
                'industrial': 'Industrial',
                'bohemian': 'Bohemian',
                'traditional': 'Traditional',
                'minimalist': 'Minimalist'
            };
            
            document.getElementById('roomTitle').textContent = 
                `${roomNames[roomType]} ${styleNames[style]}`;
            
            // Actualizează detaliile
            document.getElementById('roomDetails').innerHTML = `
                <div class="detail-item">
                    <strong>ID:</strong> ${roomId}
                </div>
                <div class="detail-item">
                    <strong>Dimensiuni:</strong> ${length}m × ${width}m × ${height}m
                </div>
                <div class="detail-item">
                    <strong>Formă:</strong> ${shape}
                </div>
                <div class="detail-item">
                    <strong>Mobilier:</strong> ${furnitureItems.length} elemente
                </div>
                <div class="detail-item">
                    <strong>Stil:</strong> ${styleNames[style]}
                </div>
                <div class="detail-item">
                    <strong>Iluminat:</strong> ${document.getElementById('lighting').value}
                </div>
            `;
        }
        
        // Generează JSON-ul
        function generateJSON() {
            const roomType = document.getElementById('roomType').value;
            const style = document.getElementById('style').value;
            const roomId = document.getElementById('roomId').value;
            const roomName = document.getElementById('roomName').value;
            const description = document.getElementById('description').value;
            const length = parseFloat(document.getElementById('roomLength').value);
            const width = parseFloat(document.getElementById('roomWidth').value);
            const height = parseFloat(document.getElementById('roomHeight').value);
            const shape = document.getElementById('roomShape').value;
            const lighting = document.getElementById('lighting').value;
            
            // Construiește obiectul JSON
            const jsonConfig = {
                project_information: {
                    schema: "IFC-aligned spatial configuration",
                    version: "1.0",
                    unit: "meters"
                },
                space: {
                    id: roomId,
                    name: roomName,
                    description: description,
                    shape: shape,
                    dimensions: {
                        length: length,
                        width: width,
                        height: height
                    },
                    style: style,
                    furniture_placement_requirements: [
                        "All objects must be positioned exactly according to provided coordinates",
                        "All objects must maintain exact specified dimensions",
                        "Rotation values must be applied precisely where specified",
                        "Object positions are relative to room origin (0,0) at bottom-left corner"
                    ],
                    furniture: furnitureItems.map(item => ({
                        type: item.type,
                        ifc_class: item.ifc_class,
                        position: item.position,
                        dimensions: item.dimensions,
                        height: item.height
                    })),
                    metadata: {
                        lighting: lighting,
                        coordinate_system: "Cartesian (x,y) with origin at room corner",
                        scale: "1 unit = 1 meter"
                    }
                },
                visualization_instructions: {
                    task: `Generate a photorealistic 3D rendering of ${roomId}`,
                    requirements: [
                        "Viewpoint showing overall room layout",
                        "Maintain exact spatial positioning of all objects as specified",
                        "Maintain precise dimensional accuracy of all objects",
                        `Apply ${style} architectural style consistently`,
                        `Ensure ${lighting} lighting conditions as specified`
                    ]
                }
            };
            
            // Formatează și afișează JSON-ul
            const jsonString = JSON.stringify(jsonConfig, null, 2);
            const formattedJSON = syntaxHighlight(jsonString);
            document.getElementById('promptDisplay').innerHTML = formattedJSON;
            
            // Salvează în istoric
            saveToHistory(jsonConfig);
            
            return jsonConfig;
        }
        
        // Evidențierea sintaxei JSON
        function syntaxHighlight(json) {
            json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                let cls = 'json-number';
                if (/^"/.test(match)) {
                    if (/:$/.test(match)) {
                        cls = 'json-key';
                    } else {
                        cls = 'json-string';
                    }
                } else if (/true|false/.test(match)) {
                    cls = 'json-boolean';
                } else if (/null/.test(match)) {
                    cls = 'json-null';
                }
                return '<span class="' + cls + '">' + match + '</span>';
            });
        }
        
        // Copiază JSON în clipboard
        async function copyJSON() {
            const jsonString = JSON.stringify(JSON.parse(document.getElementById('promptDisplay').textContent || document.getElementById('promptDisplay').innerText), null, 2);
            
            try {
                await navigator.clipboard.writeText(jsonString);
                showNotification('JSON copiat în clipboard!');
            } catch (err) {
                // Fallback pentru browsere vechi
                const textArea = document.createElement('textarea');
                textArea.value = jsonString;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('JSON copiat în clipboard!');
            }
        }
        
        // Afișează notificare
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const icon = notification.querySelector('i');
            const text = notification.querySelector('span');
            
            text.textContent = message;
            
            if (type === 'warning') {
                notification.style.background = '#ffc107';
                icon.className = 'fas fa-exclamation-triangle';
            } else {
                notification.style.background = 'var(--primary)';
                icon.className = 'fas fa-check-circle';
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Salvează configurație în istoric
        function saveToHistory(jsonConfig) {
            const historyItem = {
                id: Date.now(),
                name: jsonConfig.space.name,
                roomId: jsonConfig.space.id,
                style: jsonConfig.space.style,
                furnitureCount: jsonConfig.space.furniture.length,
                timestamp: new Date().toISOString(),
                date: new Date().toLocaleDateString('ro-RO'),
                config: jsonConfig
            };
            
            // Adaugă la începutul listei
            promptHistory.unshift(historyItem);
            
            // Păstrează maxim 8 intrări
            if (promptHistory.length > 8) {
                promptHistory = promptHistory.slice(0, 8);
            }
            
            // Salvează în localStorage
            localStorage.setItem('roomJSONHistory', JSON.stringify(promptHistory));
            
            // Actualizează UI
            updateHistoryPanel();
        }
        
        // Actualizează panoul de istoric
        function updateHistoryPanel() {
            const historyList = document.getElementById('historyList');
            const historyPanel = document.getElementById('historyPanel');
            
            if (promptHistory.length === 0) {
                historyPanel.style.display = 'none';
                return;
            }
            
            historyPanel.style.display = 'block';
            historyList.innerHTML = '';
            
            promptHistory.forEach(item => {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.innerHTML = `
                    <strong>${item.roomId} - ${item.name}</strong>
                    <p style="margin: 5px 0; font-size: 0.85rem; color: var(--gray);">
                        Stil: ${item.style} | Mobilier: ${item.furnitureCount} elemente
                    </p>
                    <small><i class="far fa-clock"></i> ${item.date}</small>
                `;
                
                div.addEventListener('click', () => {
                    loadFromHistory(item);
                    showNotification('Configurație încărcată din istoric!');
                });
                
                historyList.appendChild(div);
            });
        }
        
        // Încarcă configurație din istoric
        function loadFromHistory(item) {
            const config = item.config;
            
            // Setează valorile din configurație
            document.getElementById('roomType').value = getKeyByValue(roomIcons, config.space.id.includes('bedroom') ? 'fas fa-bed' : 
                config.space.id.includes('living') ? 'fas fa-couch' : 
                config.space.id.includes('kitchen') ? 'fas fa-utensils' : 'fas fa-bed');
            
            document.getElementById('style').value = config.space.style;
            document.getElementById('roomId').value = config.space.id;
            document.getElementById('roomName').value = config.space.name;
            document.getElementById('description').value = config.space.description;
            document.getElementById('roomLength').value = config.space.dimensions.length;
            document.getElementById('roomWidth').value = config.space.dimensions.width;
            document.getElementById('roomHeight').value = config.space.dimensions.height;
            document.getElementById('roomShape').value = config.space.shape;
            document.getElementById('lighting').value = config.space.metadata.lighting;
            
            // Actualizează mobilierele
            furnitureItems = config.space.furniture;
            updateFurnitureList();
            
            // Actualizează previzualizarea și generează JSON
            updateRoomPreview();
            generateJSON();
        }
        
        // Funcție helper pentru a obține cheia după valoare
        function getKeyByValue(object, value) {
            return Object.keys(object).find(key => object[key] === value);
        }
    </script>
</body>
</html>